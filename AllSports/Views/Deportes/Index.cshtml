@model IndexViewModel

@{

    Layout = "~/views/shared/_layout.cshtml";
    List<int> idsproductos = Context.Session.GetObject<List<int>>("IDSPRODUCTOS");
    int registros = 0;
    int numeroPagina = 1;
    if (ViewData["REGISTROS"] != null)
    {
        registros = (int)ViewData["REGISTROS"];
    }
}


<style>
    .title-text {
        position: absolute;
        bottom: 20px;
        left: 20px;
        transition: transform 0.3s ease;
    }

    .card-custom:hover .title-text {
        transform: translateY(-5px); /* Mueve el título hacia arriba */
        color: #2D31C4; /* Cambia el color del texto al pasar el ratón */
    }

    .card-custom:hover {
        box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.3); /* Cambia la sombra al pasar el ratón */
    }

    .product-card {
        transition: box-shadow 0.3s, transform 0.3s;
    }

        .product-card:hover {
            box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3); /* Ajusta la sombra al pasar el ratón */
            transform: translateY(-5px); /* Mueve ligeramente la tarjeta hacia arriba */
        }

            .product-card:hover .card-title,
            .product-card:hover .card-text {
                color: #007F7F; /* Cambia el color del texto al pasar el ratón */
            }
</style>


<h2 style="color: #007F7F"> @ViewData["MENSAJE"]</h2>

<div class="container">
    <div class="row">
        <div class="col">
            <input type="text" id="searchInput" class="form-control" placeholder="Buscar producto...">
        </div>
        <div class="col-auto">
            <button class="btn btn-primary" onclick="searchProducts()">Buscar</button>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div id="searchResults"></div>
        </div>
        <div class="col-auto">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <span class="nav-link">¿Te interesa la nutrición?</span>
                </li>
                <li class="nav-item">
                    <select class="form-control">
                        @foreach (var nutricion in Model.Nutricion)
                        {
                            <option value="@nutricion.IdTipoNutricion">@nutricion.Nombre</option>
                        }
                    </select>
                </li>
            </ul>
        </div>
    </div>
</div>

<div id="carouselExampleDark" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <div class="carousel-item">
            <img src="~/Images/niñoacordeon.JPG" class="d-block w-100" alt="Imagen 1">
        </div>
        <div class="carousel-item active">
            <img src="~/Images/TenisAccordeon1.jpg" class="d-block w-100" alt="Imagen 2">
        </div>
        <div class="carousel-item">
            <img src="~/Images/VoleyAcordeon.JPG" class="d-block w-100" alt="Imagen 3">
        </div>
     
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
</div>


<div class="py-3">
    

    <h1 class="text-center">DEPORTES</h1>

    <div class="container mt-4">
        <div class="row">
            @foreach (var deporte in Model.DetalleDeporte)
            {
                <div class="col-md-4 mb-3">
                    <a asp-action="CategoriasProducto" asp-controller="Deportes" asp-route-IdDetalleDeporte="@deporte.IdDetalleDeporte">
                        <div class="card p-4 shadow bg-primary text-white position-relative card-custom" style="background-image: url('/images/@deporte.Imagen'); background-size: cover; background-position: center;">
                            <h5 class="form-label title-text position-absolute bottom-0 start-50 translate-middle-x">@deporte.Nombre</h5>
                        </div>
                    </a>
                </div>
            }
        </div>
    </div>

    @if (Model.Productos != null)
    {
        <h2>TODOS NUESTROS PRODUCTOS</h2>
        <div class="container mt-4">
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="card p-3 shadow">
                        <label for="deporteSelect" class="form-label">Productos:</label>
                        <div class="container">
                            <div class="row row-cols-1 row-cols-md-3 g-4">
                                <!-- Utilizamos row-cols-md-3 para que haya una fila de 3 columnas en dispositivos medianos (md) y una columna en dispositivos pequeños -->
                                @foreach (var producto in Model.Productos)
                                {
                                    <div class="col mb-4">
                                        <!-- Eliminamos el estilo width: 400px; del div.card para que el ancho sea automático -->
                                        <div class="card p-4 shadow bg-light product-card">
                                            @if (producto.Imagen != null)
                                            {
                                                <img src="~/Images/@producto.Imagen" class="card-img-top w-100 mx-auto d-block" alt="@producto.Nombre">
                                            }
                                            <div class="card-body">
                                                <h5 class="card-title">@producto.Nombre</h5>
                                                <p class="card-text">@producto.Descripcion</p>
                                                <p class="card-text">Precio: @producto.Precio,00€</p>
                                                <a asp-controller="Deportes" asp-action="DetailProducto" asp-route-IdProducto="@producto.IdProducto" class="btn btn-primary">Mas Info</a>
                                                @if (idsproductos == null)
                                                {
                                                    <a class="btn btn-info" asp-controller="Deportes"
                                                       asp-action="Index"
                                                       asp-route-idProducto="@producto.IdProducto"
                                                       asp-route-precio="@producto.Precio">
                                                        Agregar al carrito
                                                    </a>
                                                }
                                                else
                                                {
                                                    if (idsproductos.Contains(producto.IdProducto))
                                                    {
                                                        <h4 style="color:deepskyblue">Este producto ya lo tienes en el carrito</h4>
                                                    }
                                                    else
                                                    {
                                                        <a class="btn btn-info" asp-controller="Deportes"
                                                           asp-action="Index"
                                                           asp-route-idProducto="@producto.IdProducto"
                                                           asp-route-precio="@producto.Precio">
                                                            Agregar al carrito
                                                        </a>
                                                    }
                                                }
                                                <a asp-action="Compra" asp-controller="Deportes" asp-route-id="@producto.IdProducto" class="btn btn-success pt-2 mt-2">Comprar</a>
                                                @if (Context.User.IsInRole("1") == true)
                                                {
                                                    
                                                        <a asp-action="Compra" asp-controller="Deportes" asp-route-id="@producto.IdProducto" class="btn btn-warning pt-2 mt-2">Modificar</a>
                                                    
                                                   <form method="post" >
                                                        <a asp-action="EliminarProducto" asp-controller="Deportes" asp-route-idproducto="@producto.IdProducto" class="btn btn-danger pt-2 mt-2">Eliminar</a>
                                                    </form>
                                                       
                                                }
                                            </div>
                                        </div>
                                    </div>
                                }
                                <div>
                                    <ul class="list-group list-group-horizontal">
                                        <li class="list-group-item list-group-item-warning">
                                            <a asp-controller="Deportes"
                                               asp-action="Index"
                                               asp-route-posicion="@( (int)ViewData["POSICIONACTUAL"] - 6)">
                                                atras
                                            </a>
                                        </li>
                                        <li class="list-group-item list-group-item-warning">
                                            <a asp-controller="Deportes"
                                               asp-action="Index"
                                               asp-route-posicion="@( (int)ViewData["POSICIONACTUAL"] + 6)">
                                                >>>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
 

